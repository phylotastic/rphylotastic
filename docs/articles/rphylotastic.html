<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>rphylotastic • rphylotastic</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="rphylotastic">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rphylotastic</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/rphylotastic.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/phylotastic/rphylotastic">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>rphylotastic</h1>
                        <h4 class="author">Brian O’Meara and Luna L. Sánchez-Reyes</h4>
            
            <h4 class="date">2018-09-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/phylotastic/rphylotastic/blob/master/vignettes/rphylotastic.Rmd"><code>vignettes/rphylotastic.Rmd</code></a></small>
      <div class="hidden name"><code>rphylotastic.Rmd</code></div>

    </div>

    
    
<p><code>rphylotastic</code> connects to Phylotastic web services, which themselves wrap and process multiple other services as well as have unique services of their own.</p>
<p>You first need to install and load the package:</p>
<p>CRAN version:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">"rphylotastic"</span>)</a></code></pre></div>
<p>Or development version:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(devtools)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"phylotastic/rphylotastic"</span>)</a></code></pre></div>
<p>Then load the package:</p>
<div id="getting-trees" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-trees" class="anchor"></a>Getting trees</h1>
<p>The main use for <code>rphylotastic</code> is getting phylogenetic trees for a set of taxa of interest. Trees can come from Open Tree of Life (topology only, many polytomies), Phylomatic (has branch lengths, but only plants and mammals), or NCBI taxonomy (even more polytomies than Open Tree’s tree). See also the <code>treebase</code> and <code>rotl</code> packages for getting individual trees, or <code>datelife</code> for getting chronograms (a single synthetic one or individual ones).</p>
<p>Would you like to know about north american endemic carnivorous plants and their relationship to other plants with the same behaviour? The venus flytrap (<em>Dionaea muscipula</em>), pitcher plants (<em>Sarracenia</em> genus) and the cobra lily (<em>Darlingtonia californica</em>) can only be found in North America. The popular <em>Drosera</em> sundues, <em>Pinguicula</em> butterworts and the aquatic carnivorous <em>Utricularia</em> bladderworts, have a wider range of distribution. What are their phylogenetic relationships?</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co"># http://floranorthamerica.org/files/imported/Outreach/FNAfs_carnivory.pdf</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">taxon_names &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Dionaea muscipula"</span>, <span class="st">"Sarracenia"</span>, <span class="st">"Darlingtonia californica"</span>,</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">          <span class="st">"Drosera"</span>, <span class="st">"Pinguicula"</span>, <span class="st">"Utricularia"</span>, <span class="st">"Roridulaceae"</span>)</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">phy1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/taxa_get_otol_tree.html">taxa_get_otol_tree</a></span>(<span class="dt">taxa =</span> taxon_names)</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co"># &gt; Warning in checkTree(object): Tree contains singleton nodes.</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co"># &gt; Warning in checkTree(object): Tree contains singleton nodes.</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co"># &gt; Warning in asMethod(object): trees with unknown order may be unsafe in ape</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co"># phy1 &lt;- taxa_get_phylomatic_tree(taxa = c("elephas maximus", "felis silvestris", "homo sapiens"))</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"></a>
<a class="sourceLine" id="cb3-12" data-line-number="12">phy2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/taxa_get_phylomatic_tree.html">taxa_get_phylomatic_tree</a></span>(<span class="dt">taxa =</span> taxon_names)</a>
<a class="sourceLine" id="cb3-13" data-line-number="13"></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co"># phy3 &lt;- taxa_get_taxonomic_tree(taxa = taxon_names) # this service is giving Error in open.connection(con, "rb") : HTTP error 500. (2018.06.21)</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"></a>
<a class="sourceLine" id="cb3-16" data-line-number="16">source_tree &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Open Tree of Life"</span>, <span class="st">"Phylomatic"</span>)</a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co"># source_tree &lt;- c("Open Tree of Life", "Phylomatic", "NCBI taxonomy")</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"></a>
<a class="sourceLine" id="cb3-19" data-line-number="19">trees &lt;-<span class="st"> </span><span class="kw">c</span>(phy1, phy2)</a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co"># trees &lt;- c(phy1, phy2, phy3)</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="kw">library</span>(ape)</a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="kw">par</span>(<span class="dt">xpd =</span> <span class="ot">FALSE</span>, <span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="kw">length</span>(trees)), <span class="dt">mai =</span> <span class="kw">c</span>(<span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">0.1</span>), <span class="dt">oma =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(trees)){</a>
<a class="sourceLine" id="cb3-25" data-line-number="25">  <span class="kw">plot</span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ape/topics/ladderize">ladderize</a></span>(trees[[i]]), <span class="dt">cex =</span> <span class="fl">0.5</span>, <span class="dt">label.offset =</span> <span class="fl">0.3</span>)</a>
<a class="sourceLine" id="cb3-26" data-line-number="26">  <span class="kw">mtext</span>(<span class="kw">paste</span>(<span class="st">"from"</span>, source_tree[i]), <span class="dt">cex =</span> <span class="dv">1</span>, <span class="dt">side =</span> <span class="dv">3</span>, <span class="dt">line =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb3-27" data-line-number="27">}</a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="kw">mtext</span>(<span class="st">"Carnivorous plant tree"</span>, <span class="dt">outer =</span> T, <span class="dt">side =</span> <span class="dv">3</span>, <span class="dt">cex =</span> <span class="fl">1.5</span>, <span class="dt">line =</span> <span class="dv">0</span>)</a></code></pre></div>
<p><img src="rphylotastic_files/figure-html/unnamed-chunk-1-1.png" width="576" style="display: block; margin: auto;"></p>
<p>With <code>rphylotastic</code>, you can also check if any two trees are exactly equal.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw"><a href="../reference/phylo_compare.html">phylo_compare</a></span>(phy1, phy1)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co"># &gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co"># since names are different in both trees, the following will be FALSE</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="kw"><a href="../reference/phylo_compare.html">phylo_compare</a></span>(phy1, phy2)</a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co"># &gt; [1] FALSE</span></a></code></pre></div>
</div>
<div id="getting-scientific-names" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-scientific-names" class="anchor"></a>Getting scientific names</h1>
<div id="from-scratch" class="section level2">
<h2 class="hasAnchor">
<a href="#from-scratch" class="anchor"></a>From scratch</h2>
<p>One very cool feature of <code>rphylotastic</code> is the ability to scrape scientific names from documents or web pages. For example, you can get all latin names from a wikipedia article on primates:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># names_url &lt;- url_get_scientific_names(URL = "https://en.wikipedia.org/wiki/Primate") # this was failing 2018.09.17</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co"># length(names_url)</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co"># head(names_url)</span></a></code></pre></div>
<p>You can also extract all scientific names from a text you are studying, that you can insert as a character vector into R if it is short:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">names_text &lt;-<span class="st"> </span><span class="kw"><a href="../reference/text_get_scientific_names.html">text_get_scientific_names</a></span>(<span class="dt">text =</span> <span class="st">"The domestic cat (Felis silvestris catus or Felis catus) is a small, typically furry, carnivorous mammal."</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">head</span>(names_text)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co"># &gt; [1] "Felis silvestris catus" "Felis catus"</span></a></code></pre></div>
<p>or get from a file in your compputer if i=the text is too long:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">names_txt &lt;-<span class="st"> </span><span class="kw"><a href="../reference/file_get_scientific_names.html">file_get_scientific_names</a></span>(<span class="dt">file_name =</span> <span class="st">"path/to/your/file/species.txt"</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">names_pdf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/file_get_scientific_names.html">file_get_scientific_names</a></span>(<span class="dt">file_name =</span> <span class="st">"path/to/your/file/species.pdf"</span>)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="kw">head</span>(names_txt)</a></code></pre></div>
</div>
<div id="from-a-taxon-of-interest" class="section level2">
<h2 class="hasAnchor">
<a href="#from-a-taxon-of-interest" class="anchor"></a>From a taxon of interest</h2>
<p>If you are interested in a particular group, and you want to get a tree containing all species within the group, function <code>taxon_get_species</code> will get you a vector of all species registered in Open Tree of Life taxonomy for that group. You can then use that vector to perform a tree search.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">ant_species &lt;-<span class="st"> </span><span class="kw"><a href="../reference/taxon_get_species.html">taxon_get_species</a></span>(<span class="dt">taxon =</span> <span class="st">"Formicidae"</span>)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw">length</span>(ant_species)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co"># &gt; [1] 10883</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="kw">head</span>(ant_species)</a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co"># &gt; [1] "Hypopomyrmex bombiccii"  "Stigmomyrmex venustus"  </span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co"># &gt; [3] "Imhoffia pallida"        "Imhoffia nigra"         </span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co"># &gt; [5] "Kotshkorkia laticeps"    "Poneropterus sphecoides"</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co"># phy1 &lt;- taxa_get_otol_tree(taxa = ant_species)</span></a></code></pre></div>
<p>This function works to get all species from one taxon at a time. If you try with several higher-taxon names, it will give you the species for the first taxon only:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">more_species &lt;-<span class="st"> </span><span class="kw"><a href="../reference/taxon_get_species.html">taxon_get_species</a></span>(<span class="dt">taxon =</span> <span class="kw">c</span>(<span class="st">"Formicidae"</span>, <span class="st">"Felidae"</span>))</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw">length</span>(more_species)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co"># &gt; [1] 10883</span></a></code></pre></div>
<p>But you can use a handy apply function</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">more_species &lt;-<span class="st"> </span><span class="kw">rapply</span>(<span class="kw">list</span>(<span class="st">"Formicidae"</span>, <span class="st">"Felidae"</span>), taxon_get_species)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw">length</span>(more_species)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co"># &gt; [1] 10982</span></a></code></pre></div>
<p>Or see <code>datelife</code> package for a wrapper of this function accepting multiple taxon names at a time.</p>
<div id="subsetting-species-names" class="section level3">
<h3 class="hasAnchor">
<a href="#subsetting-species-names" class="anchor"></a>Subsetting species names</h3>
<p>Species from a taxon can also be subset by country or by genome:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">spp_from_country &lt;-<span class="st"> </span><span class="kw"><a href="../reference/taxon_get_species_from_country.html">taxon_get_species_from_country</a></span>(<span class="st">"Formicidae"</span>, <span class="st">"Mexico"</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw">length</span>(spp_from_country)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co"># &gt; [1] 479</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="kw">head</span>(spp_from_country)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co"># &gt; [1] "Acanthoponera goeldii" "Acanthoponera minor"   "Tatuidris tatusia"    </span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co"># &gt; [4] "Amblyopone orizabana"  "Prionopelta modesta"   "Prionopelta amabilis"</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7">spp_with_genome &lt;-<span class="st"> </span><span class="kw"><a href="../reference/taxon_get_species_with_genome.html">taxon_get_species_with_genome</a></span>(<span class="st">"Formicidae"</span>)</a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="kw">length</span>(spp_with_genome)</a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co"># &gt; [1] 26</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="kw">head</span>(spp_with_genome)</a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="co"># &gt; [1] "Ooceraea biroi"         "Harpegnathos saltator" </span></a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co"># &gt; [3] "Dinoponera quadriceps"  "Aphaenogaster picea"   </span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="co"># &gt; [5] "Aphaenogaster miamiana" "Aphaenogaster fulva"</span></a></code></pre></div>
</div>
</div>
</div>
<div id="checking-your-scientific-names" class="section level1">
<h1 class="hasAnchor">
<a href="#checking-your-scientific-names" class="anchor"></a>Checking your scientific names</h1>
<p>You may already have a list of names, but you want to check if they all are good scientific names. <code>rphylotastic</code> calls Global Name Resolver (GNR) and the Taxonomic Name Resolution Service (TNRS) to verify names. This function will keep correct names only.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">species &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Delphinus delphus"</span>, <span class="st">"Homo sepiens"</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw"><a href="../reference/taxa_resolve_names_with_otol.html">taxa_resolve_names_with_otol</a></span>(<span class="dt">taxa =</span> species)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co"># &gt; Success</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co"># &gt; Warning in taxa_resolve_names_with_otol(taxa = species): Fewer names were</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co"># &gt; found than were given; missing taxa were dropped.</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co"># &gt; [1] "Delphinus delphus"</span></a></code></pre></div>
<p>Alternatively, you can use one of the many services from <code>rotl</code> and <code>taxize</code> packages to clean your names:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">library</span>(taxize)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">species_gnr &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/taxize/topics/gnr_resolve">gnr_resolve</a></span>(<span class="dt">names =</span> species)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="kw">nrow</span>(species_gnr)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co"># &gt; [1] 32</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co"># it is a big table. Let's subset by unique matched names, so it is easier to choose:</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6">species_gnr[<span class="op">!</span><span class="kw">duplicated</span>(species_gnr<span class="op">$</span>matched_name),<span class="kw">c</span>(<span class="st">"user_supplied_name"</span>, <span class="st">"matched_name"</span>)]</a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co"># &gt; # A tibble: 8 x 2</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co"># &gt;   user_supplied_name matched_name                    </span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co"># &gt;   &lt;chr&gt;              &lt;chr&gt;                           </span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co"># &gt; 1 Delphinus delphus  Delphinus delphus               </span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co"># &gt; 2 Delphinus delphus  Delphinus delphus Linnaeus, 1758</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co"># &gt; 3 Homo sepiens       Homo sapiens Linnaeus, 1758     </span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co"># &gt; 4 Homo sepiens       Homo sapiens                    </span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co"># &gt; 5 Homo sepiens       Homo sapiens subsp. Denisova    </span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co"># &gt; 6 Homo sepiens       Homo sapiens L.                 </span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="co"># &gt; 7 Homo sepiens       Homo sapiens Linnaeus 1758      </span></a>
<a class="sourceLine" id="cb13-17" data-line-number="17"><span class="co"># &gt; 8 Homo sepiens       Homo sapiens ssp. Denisova</span></a>
<a class="sourceLine" id="cb13-18" data-line-number="18"><span class="kw"><a href="http://www.rdocumentation.org/packages/taxize/topics/tnrs">tnrs</a></span>(<span class="dt">query =</span> species)</a>
<a class="sourceLine" id="cb13-19" data-line-number="19"><span class="co"># &gt; Calling http://taxosaurus.org/retrieve/1271ecb366fb0965eb912b46d224cae2</span></a>
<a class="sourceLine" id="cb13-20" data-line-number="20"><span class="co"># &gt;       submittedname acceptedname    sourceid score  matchedname authority</span></a>
<a class="sourceLine" id="cb13-21" data-line-number="21"><span class="co"># &gt; 1 Delphinus delphus   Delphinium iPlant_TNRS  0.48   Delphinium        L.</span></a>
<a class="sourceLine" id="cb13-22" data-line-number="22"><span class="co"># &gt; 2      Homo sepiens              iPlant_TNRS  0.53 Hoya serpens          </span></a>
<a class="sourceLine" id="cb13-23" data-line-number="23"><span class="co"># &gt;                                     uri</span></a>
<a class="sourceLine" id="cb13-24" data-line-number="24"><span class="co"># &gt; 1 http://www.tropicos.org/Name/40023242</span></a>
<a class="sourceLine" id="cb13-25" data-line-number="25"><span class="co"># &gt; 2</span></a></code></pre></div>
<p>On the example above, species names were matched to iPlant database only. If you look at the score, it’s pretty low (&lt;0.6), so you can tell that this match is probably wrong.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">library</span>(rotl)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co"># &gt; </span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co"># &gt; Attaching package: 'rotl'</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co"># &gt; The following objects are masked from 'package:taxize':</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co"># &gt; </span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co"># &gt;     synonyms, tax_name, tax_rank</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7">species_tnrs &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/rotl/topics/tnrs_match_names">tnrs_match_names</a></span>(<span class="dt">names =</span> species)</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">species_tnrs[,<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="co"># &gt;       search_string       unique_name approximate_match ott_id is_synonym</span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co"># &gt; 1 delphinus delphus Delphinus delphis             FALSE 698438       TRUE</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co"># &gt; 2      homo sepiens      Homo sapiens              TRUE 770315      FALSE</span></a></code></pre></div>
<p>Package <code>brranching</code> has a very nice function that allows choosing among multiple matches. This function is actually used in phylomatic tree searches implemented via <code>rphylotastic</code> function.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">library</span>(brranching)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="kw"><a href="http://www.rdocumentation.org/packages/brranching/topics/phylomatic_names">phylomatic_names</a></span>(<span class="st">"Byblis"</span>)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co"># [1] "byblidaceae/byblis/byblis"</span></a></code></pre></div>
</div>
<div id="getting-data-from-encyclopedia-of-life" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-data-from-encyclopedia-of-life" class="anchor"></a>Getting data from Encyclopedia of Life</h1>
<p>You can also get some images:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">some_images &lt;-<span class="st"> </span><span class="kw"><a href="../reference/species_get_image_data.html">species_get_image_data</a></span>(<span class="dt">species =</span> <span class="kw">c</span>(<span class="st">"Homo sapiens"</span>, <span class="st">"Felis catus"</span>))</a></code></pre></div>
<p>Or other miscelanous info:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">some_info &lt;-<span class="st"> </span><span class="kw"><a href="../reference/species_get_info.html">species_get_info</a></span>(<span class="dt">species =</span> <span class="kw">c</span>(<span class="st">"Homo sapiens"</span>, <span class="st">"Felis catus"</span>))</a></code></pre></div>
</div>
<div id="managing-your-lists-of-names" class="section level1">
<h1 class="hasAnchor">
<a href="#managing-your-lists-of-names" class="anchor"></a>Managing your lists of names</h1>
<p>You can get an phylotastic! user ID by registering with your gmail address on the portal. Then, you can get a temporary token sent to you email to help you manage your lists from the R console. Here are a few examples, but they won’t work for you since th etoken expire afer a few hours.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="../reference/get_species_from_list.html">get_species_from_list</a></span>()</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="kw"><a href="../reference/update_species_in_list.html">update_species_in_list</a></span>()</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="kw"><a href="../reference/insert_species_in_list.html">insert_species_in_list</a></span>()</a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="kw"><a href="../reference/replace_species_in_list.html">replace_species_in_list</a></span>()</a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="kw"><a href="../reference/remove_species_from_list.html">remove_species_from_list</a></span>()</a></code></pre></div>
</div>
<div id="citing" class="section level1">
<h1 class="hasAnchor">
<a href="#citing" class="anchor"></a>Citing</h1>
<p>The phylotastic manuscript is still being written.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#getting-trees">Getting trees</a></li>
      <li>
<a href="#getting-scientific-names">Getting scientific names</a><ul class="nav nav-pills nav-stacked">
<li><a href="#from-scratch">From scratch</a></li>
      <li><a href="#from-a-taxon-of-interest">From a taxon of interest</a></li>
      </ul>
</li>
      <li><a href="#checking-your-scientific-names">Checking your scientific names</a></li>
      <li><a href="#getting-data-from-encyclopedia-of-life">Getting data from Encyclopedia of Life</a></li>
      <li><a href="#managing-your-lists-of-names">Managing your lists of names</a></li>
      <li><a href="#citing">Citing</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Brian O'Meara, Abu Saleh Md Tayeen, Luna L. Sanchez Reyes.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
